<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="BitBuffer.html">BitBuffer</a></li></li><li><li><a href="NatLib.html">NatLib</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.NatLib">NatLib</a></li></li><li><li><a href="#type.BitBuffer">BitBuffer</a></li></li><li><li><a href="#init">init</a></li></li><li><li><a href="#tabulate">tabulate</a></li></li><li><li><a href="#fromBytes">fromBytes</a></li></li><li><li><a href="#fromWords">fromWords</a></li></li><li><li><a href="#withNat8Word">withNat8Word</a></li></li><li><li><a href="#withNat16Word">withNat16Word</a></li></li><li><li><a href="#withNat32Word">withNat32Word</a></li></li><li><li><a href="#withNat64Word">withNat64Word</a></li></li><li><li><a href="#toBytes">toBytes</a></li></li><li><li><a href="#toWords">toWords</a></li></li><li><li><a href="#bitcountNonZero">bitcountNonZero</a></li></li><li><li><a href="#isByteAligned">isByteAligned</a></li></li><li><li><a href="#isWordAligned">isWordAligned</a></li></li></ul></nav><div class="documentation"><h1>BitBuffer</h1><p>A Buffer for bit-level manipulation.</p>
<div class="declaration"><h4 class="type-declaration" id="type.NatLib"><span class="keyword">type </span><span class="type">NatLib</span>&lt;<span class="type">A</span>&gt; = <a href="NatLib.html#type.NatLib"><span class="type">NatLib.NatLib</span></a>&lt;<span class="type">A</span>&gt;</h4><p></p></div><div class="declaration"><h4 class="class-declaration" id="type.BitBuffer"><span class="keyword">class </span><span class="classname">BitBuffer</span>&lt;<span class="type">NatX</span>&gt;(<span class="parameter">natlib</span> : <a href="#type.NatLib"><span class="type">NatLib</span></a>&lt;<span class="type">NatX</span>&gt;, <span class="parameter">init_bit_capacity</span> : <span class="type">Nat</span>)</h4><div class="declaration"><h4 class="function" id="BitBuffer.size"><code><span class="keyword">public func </span><span class="fnname">size</span>() : <span class="type">Nat</span></code></h4><p><p>Returns the number of bits in the buffer</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.wordSize"><code><span class="keyword">public func </span><span class="fnname">wordSize</span>() : <span class="type">Nat</span></code></h4><p><p>Returns the number of bits in each word</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.capacity"><code><span class="keyword">public func </span><span class="fnname">capacity</span>() : <span class="type">Nat</span></code></h4><p><p>Returns the number of bits that can be stored in the buffer without
reallocation</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.bitcount"><code><span class="keyword">public func </span><span class="fnname">bitcount</span>(<span class="parameter">bit</span> : <span class="type">Bool</span>) : <span class="type">Nat</span></code></h4><p><p>Counts the number of bits that match the given bit</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.get"><code><span class="keyword">public func </span><span class="fnname">get</span>(<span class="parameter">index</span> : <span class="type">Nat</span>) : <span class="type">Bool</span></code></h4><p><p>Returns the bit at the given index</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.getBits"><code><span class="keyword">public func </span><span class="fnname">getBits</span>(<span class="parameter">i</span> : <span class="type">Nat</span>, <span class="parameter">n</span> : <span class="type">Nat</span>) : <span class="type">NatX</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.getByte"><code><span class="keyword">public func </span><span class="fnname">getByte</span>(<span class="parameter">i</span> : <span class="type">Nat</span>) : <span class="type">Nat8</span></code></h4><p><p>Gets the byte from the given index</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.put"><code><span class="keyword">public func </span><span class="fnname">put</span>(<span class="parameter">i</span> : <span class="type">Nat</span>, <span class="parameter">bit</span> : <span class="type">Bool</span>)</code></h4><p><p>Sets the bit at the given index</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.putBits"><code><span class="keyword">public func </span><span class="fnname">putBits</span>(<br/>  <span class="parameter">i</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">n</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">bits</span> : <span class="type">NatX</span><br/>)</code></h4><p><p>Sets the bits at the given index</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.insert"><code><span class="keyword">public func </span><span class="fnname">insert</span>(<span class="parameter">i</span> : <span class="type">Nat</span>, <span class="parameter">bit</span> : <span class="type">Bool</span>)</code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.insertBits"><code><span class="keyword">public func </span><span class="fnname">insertBits</span>(<br/>  <span class="parameter">i</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">n</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">bits</span> : <span class="type">NatX</span><br/>)</code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.add"><code><span class="keyword">public func </span><span class="fnname">add</span>(<span class="parameter">bit</span> : <span class="type">Bool</span>)</code></h4><p><p>Adds a bit to the end of the buffer</p>
<pre class="motoko"><code class="motoko">import Nat32 &quot;mo:base/Nat32&quot;;
import BitBuffer &quot;mo:bitbuffer/BitBuffer&quot;;

let bitbuffer = BitBuffer.BitBuffer&lt;Nat32&gt;(Nat32, 3);

bitbuffer.add(true);
bitbuffer.add(false);
bitbuffer.add(true);

assert bitbuffer.size() == 3;
assert bitbuffer.get(0) == true;
assert bitbuffer.get(1) == false;
assert bitbuffer.get(2) == true;</code></pre></p></div><div class="declaration"><h4 class="function" id="BitBuffer.addBits"><code><span class="keyword">public func </span><span class="fnname">addBits</span>(<span class="parameter">n</span> : <span class="type">Nat</span>, <span class="parameter">bits</span> : <span class="type">NatX</span>)</code></h4><p><p>Adds bits to the end of the buffer up to the word_size</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.addByte"><code><span class="keyword">public func </span><span class="fnname">addByte</span>(<span class="parameter">n</span> : <span class="type">Nat8</span>)</code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.addBytes"><code><span class="keyword">public func </span><span class="fnname">addBytes</span>(<span class="parameter">bytes</span> : [<span class="type">Nat8</span>])</code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.append"><code><span class="keyword">public func </span><span class="fnname">append</span>(<span class="parameter">other</span> : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;)</code></h4><p><p>Appends the bits from the given buffer to the end of this buffer</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.removeLast"><code><span class="keyword">public func </span><span class="fnname">removeLast</span>() : ?<span class="type">Bool</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.remove"><code><span class="keyword">public func </span><span class="fnname">remove</span>(<span class="parameter">i</span> : <span class="type">Nat</span>) : <span class="type">Bool</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.removeBits"><code><span class="keyword">public func </span><span class="fnname">removeBits</span>(<span class="parameter">i</span> : <span class="type">Nat</span>, <span class="parameter">n</span> : <span class="type">Nat</span>) : <span class="type">NatX</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.pad"><code><span class="keyword">public func </span><span class="fnname">pad</span>(<span class="parameter">n</span> : <span class="type">Nat</span>)</code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.byteAlign"><code><span class="keyword">public func </span><span class="fnname">byteAlign</span>()</code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.wordAlign"><code><span class="keyword">public func </span><span class="fnname">wordAlign</span>()</code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.invert"><code><span class="keyword">public func </span><span class="fnname">invert</span>()</code></h4><p><p>Flips all the bits in the buffer</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.clear"><code><span class="keyword">public func </span><span class="fnname">clear</span>()</code></h4><p><p>Removes all the bits in the buffer</p>
</p></div><div class="declaration"><h4 class="function" id="BitBuffer.clone"><code><span class="keyword">public func </span><span class="fnname">clone</span>() : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.words"><code><span class="keyword">public func </span><span class="fnname">words</span>() : <a href="#type.Iter"><span class="type">Iter</span></a>&lt;<span class="type">NatX</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="BitBuffer.vals"><code><span class="keyword">public func </span><span class="fnname">vals</span>() : <a href="#type.Iter"><span class="type">Iter</span></a>&lt;<span class="type">Bool</span>&gt;</code></h4><p></p></div><p></p></div><div class="declaration"><h4 class="function" id="init"><code><span class="keyword">public func </span><span class="fnname">init</span>&lt;<span class="type">NatX</span>&gt;(<br/>  <span class="parameter">natlib</span> : <a href="#type.NatLib"><span class="type">NatLib</span></a>&lt;<span class="type">NatX</span>&gt;, <br/>  <span class="parameter">buffer_size</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">val</span> : <span class="type">Bool</span><br/>) : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="tabulate"><code><span class="keyword">public func </span><span class="fnname">tabulate</span>&lt;<span class="type">NatX</span>&gt;(<br/>  <span class="parameter">natlib</span> : <a href="#type.NatLib"><span class="type">NatLib</span></a>&lt;<span class="type">NatX</span>&gt;, <br/>  <span class="parameter">buffer_size</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">f</span> : (<span class="type">Nat</span>) -&gt; <span class="type">Bool</span><br/>) : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="fromBytes"><code><span class="keyword">public func </span><span class="fnname">fromBytes</span>&lt;<span class="type">NatX</span>&gt;(<span class="parameter">natlib</span> : <a href="#type.NatLib"><span class="type">NatLib</span></a>&lt;<span class="type">NatX</span>&gt;, <span class="parameter">bytes</span> : [<span class="type">Nat8</span>]) : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="fromWords"><code><span class="keyword">public func </span><span class="fnname">fromWords</span>&lt;<span class="type">NatX</span>&gt;(<span class="parameter">natlib</span> : <a href="#type.NatLib"><span class="type">NatLib</span></a>&lt;<span class="type">NatX</span>&gt;, <span class="parameter">words</span> : [<span class="type">NatX</span>]) : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="withNat8Word"><code><span class="keyword">public func </span><span class="fnname">withNat8Word</span>(<span class="parameter">init_capacity</span> : <span class="type">Nat</span>) : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">Nat8</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="withNat16Word"><code><span class="keyword">public func </span><span class="fnname">withNat16Word</span>(<span class="parameter">init_capacity</span> : <span class="type">Nat</span>) : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">Nat16</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="withNat32Word"><code><span class="keyword">public func </span><span class="fnname">withNat32Word</span>(<span class="parameter">init_capacity</span> : <span class="type">Nat</span>) : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">Nat32</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="withNat64Word"><code><span class="keyword">public func </span><span class="fnname">withNat64Word</span>(<span class="parameter">init_capacity</span> : <span class="type">Nat</span>) : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">Nat64</span>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="toBytes"><code><span class="keyword">public func </span><span class="fnname">toBytes</span>&lt;<span class="type">NatX</span>&gt;(<span class="parameter">bitbuffer</span> : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;) : [<span class="type">Nat8</span>]</code></h4><p></p></div><div class="declaration"><h4 class="function" id="toWords"><code><span class="keyword">public func </span><span class="fnname">toWords</span>&lt;<span class="type">NatX</span>&gt;(<span class="parameter">bitbuffer</span> : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;) : [<span class="type">NatX</span>]</code></h4><p></p></div><div class="declaration"><h4 class="function" id="bitcountNonZero"><code><span class="keyword">public func </span><span class="fnname">bitcountNonZero</span>&lt;<span class="type">NatX</span>&gt;(<span class="parameter">bitbuffer</span> : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;) : <span class="type">Nat</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="isByteAligned"><code><span class="keyword">public func </span><span class="fnname">isByteAligned</span>&lt;<span class="type">NatX</span>&gt;(<span class="parameter">bitbuffer</span> : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;) : <span class="type">Bool</span></code></h4><p></p></div><div class="declaration"><h4 class="function" id="isWordAligned"><code><span class="keyword">public func </span><span class="fnname">isWordAligned</span>&lt;<span class="type">NatX</span>&gt;(<span class="parameter">bitbuffer</span> : <a href="#type.BitBuffer"><span class="type">BitBuffer</span></a>&lt;<span class="type">NatX</span>&gt;) : <span class="type">Bool</span></code></h4><p></p></div></div></body></html>